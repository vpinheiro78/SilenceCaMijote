<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Silence, ça mijote</title>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<header class="site-header">
  <h1>Silence, ça mijote</h1>
  <a class="admin-link" href="admin/login.html" title="Admin"><img src="assets/logo.png" alt="Logo" /></a>
 <!-- 🌍 Sélecteur de langue avec drapeaux -->
<div class="lang-switcher">
  <img src="assets/flags/fr.svg" alt="Français" onclick="changeLanguage('fr')">
  <img src="assets/flags/en.svg" alt="English" onclick="changeLanguage('en')">
  <img src="assets/flags/es.svg" alt="Español" onclick="changeLanguage('es')">
  <img src="assets/flags/pt.svg" alt="Português" onclick="changeLanguage('pt')">
  <img src="assets/flags/it.svg" alt="Italiano" onclick="changeLanguage('it')">
  <img src="assets/flags/de.svg" alt="Deutsch" onclick="changeLanguage('de')">
</div>

<!-- Google Translate (caché) -->
<div id="google_translate_element" style="position:absolute; left:-9999px;"></div>


</header>

<main class="container">
  <div class="blurb" id="site-blurb">Recettes préparées avec amour : des plats savoureux et gourmands pour régaler vos proches à chaque repas.</div>

  <div class="search-row">
    <input id="search" type="search" placeholder="Rechercher une recette, un ingrédient..." />
  </div>

  <div class="categories" id="categories">
    <button data-cat="all" class="cat-btn">Toutes</button>
    <button data-cat="dessert" class="cat-btn cat-dessert">Dessert</button>
    <button data-cat="viande" class="cat-btn cat-viande">Viande</button>
    <button data-cat="poisson" class="cat-btn cat-poisson">Poisson</button>
    <button data-cat="accompagnement" class="cat-btn cat-accompagnement">Accompagnement</button>
    <button data-cat="autre" class="cat-btn cat-autre">Autre</button>
  </div>
  
<div class="newsletter">
  <h3>Abonnez-vous pour être notifié dès qu’une nouvelle recette est publiée !</h3>
  <form id="subscribeForm">
    <input type="email" name="email" placeholder="Votre email" required style="padding:10px; width:250px; border-radius:6px; border:1px solid #ccc"/>
    <button type="submit" class="btn-liste-courses">S'abonner</button>
  </form>
  <p id="subscribeMessage" style="margin-top:6px;color:green;"></p>
</div>

  <section id="recipes" class="grid" aria-live="polite"></section>
</main>

<footer class="site-footer">© 2025 Silence, ça mijote</footer>

<script type="module" src="script.js"></script>

<!-- 🌍 Script Google Translate -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'fr',
      includedLanguages: 'en,es,pt,it,de', // 👈 ajoute ou retire les langues
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google_translate_element');

// Charger la langue sauvegardée
var savedLang = localStorage.getItem("preferredLang");
if (savedLang) {
    setTimeout(function() {
        changeLanguage(savedLang); // <-- utilise ta fonction qui attend le <select>
    }, 1000);
}


    // ✅ Sauvegarder le choix utilisateur
    document.addEventListener("change", function(e) {
      if (e.target && e.target.parentNode && e.target.parentNode.id === "google_translate_element") {
        localStorage.setItem("preferredLang", e.target.value);
      }
    });
  }
</script>

<script type="text/javascript" 
  src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" 
  async defer>
</script>

<script>
function changeLanguage(lang) {
    // On attend que le <select> Google Translate existe
    var checkExist = setInterval(function() {
        var select = document.querySelector("#google_translate_element select");
        if (select) {
            // Force le changement de langue
            select.value = lang;
            select.dispatchEvent(new Event('change'));

            // Sauvegarde la langue choisie
            localStorage.setItem('preferredLang', lang);

            // Stop l'intervalle
            clearInterval(checkExist);
        }
    }, 100);
}


</script>

</body>
</html>
